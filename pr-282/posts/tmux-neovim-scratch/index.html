<!DOCTYPE html>
<html lang="ja">
<head>
  
    <title>Tmux&#43;NeovimでJetBrains IDEのScratchみたいな機能を実現している話 :: blog.kyu08.com</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="任意の構成のSandbox的な環境をTmuxのwindowとして用意するようにしたところターミナルから出ずにサクっと動作検証とかが行えてハッ" />
<meta name="keywords" content=", " />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.kyu08.com/pr-282/posts/tmux-neovim-scratch/" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-BDQ408J45J"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BDQ408J45J', { 'anonymize_ip': false });
}
</script>




  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/main.min.0832e53463742bab51a209f71625f505d20a9662c72e6fc66248658a02e0f4b9.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/menu.min.48f42ef526b5c0c074cc696ab2e25a4316fdb58c4f42be6ee88c83fed3fe3c90.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/post.min.f049fef13af1dfd5ea526cc59ea5a3fc7be11a05911ca7198c5bb9225250119c.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/terminal.min.08e270ae3e1713b186bb6da1e872f4ed403127d18ae635cf9c981c6633809797.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-282/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">




<link rel="stylesheet" href="https://blog.kyu08.com/pr-282/style.css">


<link rel="shortcut icon" href="https://blog.kyu08.com/pr-282/favicon.png">
<link rel="apple-touch-icon" href="https://blog.kyu08.com/pr-282/apple-touch-icon.png">


<meta name="twitter:card" content="summary_large_image" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="kyu08_" />



<meta property="og:locale" content="ja" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Tmux&#43;NeovimでJetBrains IDEのScratchみたいな機能を実現している話">
<meta property="og:description" content="任意の構成のSandbox的な環境をTmuxのwindowとして用意するようにしたところターミナルから出ずにサクっと動作検証とかが行えてハッ" />
<meta property="og:url" content="https://blog.kyu08.com/pr-282/posts/tmux-neovim-scratch/" />
<meta property="og:site_name" content="blog.kyu08.com" />


  
  
    
  


  <meta property="og:image" content="https://blog.kyu08.com/pr-282/posts/tmux-neovim-scratch/cover.png">
  <meta name="twitter:image" content="https://blog.kyu08.com/pr-282/posts/tmux-neovim-scratch/cover.png">
  <meta name="twitter:image:alt" content="Tmux&#43;NeovimでJetBrains IDEのScratchみたいな機能を実現している話">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">


  <meta property="article:published_time" content="2023-02-04 16:15:48 &#43;0000 UTC" />









<link rel="author" href="http://www.hatena.ne.jp/kyu08/" />




<script async src="https://www.googletagmanager.com/gtag/js?id=G-BDQ408J45J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '{{ . }}');
</script>




</head>
<body>


<div class="container">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    blog.kyu08.com
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/pr-282/tags/diary/">_misc</a></li>
        
      
        
          <li><a href="/pr-282/about">about</a></li>
        
      
        
          <li><a href="/pr-282/index.xml">rss</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/pr-282/tags/diary/" >_misc</a></li>
        
      
        
          <li><a href="/pr-282/about" >about</a></li>
        
      
        
          <li><a href="/pr-282/index.xml" >rss</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.kyu08.com/pr-282/posts/tmux-neovim-scratch/">Tmux+NeovimでJetBrains IDEのScratchみたいな機能を実現している話</a>
  </h1>
  <div class="post-meta"><time class="post-date">2023/02/04</time>
      
    <span class="post-reading-time">4 min read (1727 words)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://blog.kyu08.com/pr-282/tags/%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83/">開発環境</a>&nbsp;
      
      #<a href="https://blog.kyu08.com/pr-282/tags/%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB/">ターミナル</a>&nbsp;
      
      #<a href="https://blog.kyu08.com/pr-282/tags/zsh/">zsh</a>&nbsp;
      
      #<a href="https://blog.kyu08.com/pr-282/tags/cli/">cli</a>&nbsp;
      
      #<a href="https://blog.kyu08.com/pr-282/tags/neovim/">Neovim</a>&nbsp;
      
      #<a href="https://blog.kyu08.com/pr-282/tags/tmux/">Tmux</a>&nbsp;
      
    </span>
  
  
  <img src="/pr-282/posts/tmux-neovim-scratch/cover.png"
    class="post-cover"
    alt="Tmux&#43;NeovimでJetBrains IDEのScratchみたいな機能を実現している話"
    title="Cover Image" />


  
    <nav id="TableOfContents">
  <ul>
    <li><a href="#動作イメージ">動作イメージ</a></li>
    <li><a href="#プロジェクトの内容">プロジェクトの内容</a></li>
    <li><a href="#感想">感想</a></li>
    <li><a href="#補足">補足</a>
      <ul>
        <li><a href="#ターミナル表示">ターミナル表示</a></li>
        <li><a href="#カーソル移動">カーソル移動</a></li>
        <li><a href="#lsp-server">LSP Server</a></li>
      </ul>
    </li>
  </ul>
</nav>
  

  <div class="post-content"><div>
        <p>任意の構成のSandbox的な環境をTmuxのwindowとして用意するようにしたところターミナルから出ずにサクっと動作検証とかが行えてハッピーになったよ、という記事。ここではvanillaなGoのプロジェクトの例を紹介しますが、お好みの構成でSandbox環境を作ってみてください。</p>
<p>全然大したことをやっているわけではないですがTmux, Neovimやそれらのプラグインの普及活動になれば嬉しいので書いてみます。</p>
<h2 id="動作イメージ">動作イメージ<a href="#動作イメージ" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>こんな感じでvanillaのGoプロジェクトをTmuxのwindowに開いておいて、確認したくなったときにすぐwindowを切り替えてコードを書いて実行結果を確認できるようにしている。(Gifの例はGoの書式指定子<code>%+v</code>の動作を忘れて試してみているところ)</p>
<p><img src="go-playground.gif" alt="go-playground"></p>
<p>Gifでやっていることは以下</p>
<ol>
<li>GoのSandbox環境を開いたNeovimが起動しているwindowに切り替え</li>
<li>コードを書く</li>
<li>Neovim上でターミナルを表示</li>
<li><code>make run</code>を実行してコード実行</li>
<li>結果を確認</li>
<li>元いたwindowに戻る</li>
</ol>
<p>tmux-fzfなど筆者のターミナル環境については以下参照</p>
<p><a href="https://blog.kyu08.com/posts/my-dev-setup-terminal" target="_blank" >開発の効率化のためにやっていること ターミナル編</a></p>
<p>筆者はGoの動作を確認したいことがほとんどなのでこういった構成にしているが、必要に応じてよく使うFWをセットアップした環境を作っておくと便利そう。</p>
<h2 id="プロジェクトの内容">プロジェクトの内容<a href="#プロジェクトの内容" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Go固有の内容もあるので参考程度で。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>├── .git
</span></span><span style="display:flex;"><span>├── .gitignore
</span></span><span style="display:flex;"><span>├── go.mod
</span></span><span style="display:flex;"><span>├── go.sum
</span></span><span style="display:flex;"><span>├── main.go
</span></span><span style="display:flex;"><span>├── main.go.sample
</span></span><span style="display:flex;"><span>├── main_test.go
</span></span><span style="display:flex;"><span>└── Makefile
</span></span></code></pre></div><p>基本的に<code>main.go</code>の中身を編集して、<code>go run .</code>で実行して実行結果を確認するということをしている。</p>
<p><code>Makefile</code>の中身は以下のような感じになっていて、<code>make run</code>でコード実行、<code>make clear</code>で<code>main.go</code>をまっさらにできるようにしているだけである。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Makefile" data-lang="Makefile"><span style="display:flex;"><span><span style="color:#a6e22e">.PHONY</span><span style="color:#f92672">:</span> run clear
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">run</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>  @go run .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clear</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>  @cp ./main.go.sample ./main.go
</span></span></code></pre></div><p><code>main.go.sample</code>の内容は以下。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>あとはよく見返したくなるコードは<code>main.go</code>以外のファイル名で保存したり、commitしておくと後からでもさっと確認できてよさそう。(筆者はそこまでやってない)</p>
<h2 id="感想">感想<a href="#感想" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>ターミナルから出ずに作業が完結できてうれしい。</p>
<p>同様のことはGoの場合はブラウザからThe Go Playground(※)を開いても行えるが筆者は何でもターミナルでできると嬉しい人なのでできるようにしてみた。</p>
<p>※ブラウザ上で実行できるGoのエディタ + 実行環境がセットになったやつ。<div class="blogcard" data-url="https://go.dev/play/" data-auto-fetch="true">
  <a href="https://go.dev/play/" target="_blank" rel="noopener noreferrer" class="blogcard-link"><div class="blogcard-thumbnail blogcard-thumbnail-placeholder">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </div><div class="blogcard-content">
      <div class="blogcard-title">https://go.dev/play/</div><div class="blogcard-url">https://go.dev/play/</div>
    </div>
  </a>
</div>
</p>
<p>あとやるとしたらThe Go PlaygroundにあるURL発行機能とかを実現できると他の人への共有も楽になっていいのかもしれない。(今のところあんまり他の人に共有する機会がないので困っていない)</p>
<h2 id="補足">補足<a href="#補足" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>最後に補足としてGif内で使っているNeovimのプラグインを紹介します。</p>
<h3 id="ターミナル表示">ターミナル表示<a href="#ターミナル表示" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><a href="https://github.com/voldikss/vim-floaterm" target="_blank" >voldikss/vim-floaterm</a></p>
<p><img src="floaterm.gif" alt="floaterm"></p>
<p>GoのSandbox環境の<code>main.go</code>に書いたスクリプトを実行するために、Neovimからターミナルを表示するシーンで使っている。</p>
<p>コード編集してサクっと動作確認したいときなどに便利。(といいつつ最近動作の重さが目立ってきたので<code>&lt;C-z&gt;</code>でNeovimの起動元に戻ってターミナルを操作することが多い)</p>
<h3 id="カーソル移動">カーソル移動<a href="#カーソル移動" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><a href="https://github.com/yuki-yano/fuzzy-motion.vim" target="_blank" >yuki-yano/fuzzy-motion.vim</a></p>
<p><code>fmt.Printf(&quot;u: %v\n&quot;, u)</code>の<code>u</code>から<code>%v</code>の位置にカーソル移動する際に使っているプラグイン。</p>
<p>動作のイメージはこんな感じ。</p>
<p><img src="fuzzy-motion.gif" alt="fuzzy-motion"></p>
<p>起動すると文字がグレーアウトするのでジャンプしたい文字列を入力するとその文字にジャンプするためのキーワードを表示してくれるというプラグイン。</p>
<p>同様の機能をもつプラグインとしてはeasy-motionなどのプラグインが有名だが、fuzzy-motionはジャンプしたい文字列をfuzzy-finder形式で絞り込んでくれるのが大きな特徴。(詳しくはリポジトリのREADME参照)</p>
<p>筆者はノーマルモードで<code>f</code>キーを押下するとプラグインが起動するように設定している。</p>
<p>カーソル移動の効率がよすぎて正直もうこれなしでは開発したくない。</p>
<h3 id="lsp-server">LSP Server<a href="#lsp-server" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><a href="https://github.com/neoclide/coc.nvim" target="_blank" >neoclide/coc.nvim</a></p>
<p>Language Serverをホストするためのプラグイン。</p>
<p>すごく簡単にいうと補完や関数定義を表示したり定義ジャンプできるようにしたりしてくれる。</p>
<p><img src="coc-nvim.gif" alt="coc-nvim"></p>
<p>以上です。ここまで読んでくれてありがとうございました。</p>

      </div></div>

  
  

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">Read other posts</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://blog.kyu08.com/pr-282/posts/fzf-bookmark-opener/" class="button inline prev">
        yamlに定義したbookmarkをfzfで選択してブラウザで開くCLIツールをGoで作った
      </a>
    
    
      <a href="https://blog.kyu08.com/pr-282/posts/learn-design-pattern/" class="button inline next">
        デザインパターンをひととおり眺めた感想
      </a>
    
  </div>
</div>


  

  
    <script src="https://utteranc.es/client.js"
        repo="kyu08/blog-comments"
        issue-term="pathname"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>

  

  
    <div class="table-of-contents-sidebar">
      <h2>
        目次
      </h2>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#動作イメージ">動作イメージ</a></li>
    <li><a href="#プロジェクトの内容">プロジェクトの内容</a></li>
    <li><a href="#感想">感想</a></li>
    <li><a href="#補足">補足</a>
      <ul>
        <li><a href="#ターミナル表示">ターミナル表示</a></li>
        <li><a href="#カーソル移動">カーソル移動</a></li>
        <li><a href="#lsp-server">LSP Server</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    <script src="https://blog.kyu08.com/pr-282/toc.js"></script>
  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>blog.kyu08.com</span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/pr-282/bundle.min.js"></script>


<font color="#808080">
  <span>
    This site uses Google Analytics for access analysis.
    Google Analytics uses cookies to collect traffic data, but this traffic data is collected anonymously and does not personally identify you.
    Cookies can be disabled in your browser.
  </span>
</font>


<script src="https://blog.kyu08.com/pr-282/blogcard.js"></script>


  
</div>

</body>
</html>
