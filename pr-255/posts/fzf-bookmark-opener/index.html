<!DOCTYPE html>
<html lang="ja">
<head>
  
    <title>yamlに定義したbookmarkをfzfで選択してブラウザで開くCLIツールをGoで作った :: blog.kyu08.com</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="つくったもの yamlに定義しておいたbookmarkをfzfで選択してブラウザで開くCLIツールをGoで作った。 https://github.com/kyu08/fzf-bookmark-openerhttps://github.com/kyu08/fzf-bookmark-opener こんな感じで動く。 コードの" />
<meta name="keywords" content=", " />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.kyu08.com/pr-255/posts/fzf-bookmark-opener/" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-BDQ408J45J"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BDQ408J45J', { 'anonymize_ip': false });
}
</script>




  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/main.min.0832e53463742bab51a209f71625f505d20a9662c72e6fc66248658a02e0f4b9.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/menu.min.48f42ef526b5c0c074cc696ab2e25a4316fdb58c4f42be6ee88c83fed3fe3c90.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/post.min.d551b54605ea87772c5eb05bf68219699a011687df301682a1006e8811253df9.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/terminal.min.08e270ae3e1713b186bb6da1e872f4ed403127d18ae635cf9c981c6633809797.css">

  
  <link rel="stylesheet" href="https://blog.kyu08.com/pr-255/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">




<link rel="stylesheet" href="https://blog.kyu08.com/pr-255/style.css">


<link rel="shortcut icon" href="https://blog.kyu08.com/pr-255/favicon.png">
<link rel="apple-touch-icon" href="https://blog.kyu08.com/pr-255/apple-touch-icon.png">


<meta name="twitter:card" content="summary_large_image" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="kyu08_" />



<meta property="og:locale" content="ja" />
<meta property="og:type" content="article" />
<meta property="og:title" content="yamlに定義したbookmarkをfzfで選択してブラウザで開くCLIツールをGoで作った">
<meta property="og:description" content="つくったもの yamlに定義しておいたbookmarkをfzfで選択してブラウザで開くCLIツールをGoで作った。 https://github.com/kyu08/fzf-bookmark-openerhttps://github.com/kyu08/fzf-bookmark-opener こんな感じで動く。 コードの" />
<meta property="og:url" content="https://blog.kyu08.com/pr-255/posts/fzf-bookmark-opener/" />
<meta property="og:site_name" content="blog.kyu08.com" />


  
  
    
  


  <meta property="og:image" content="https://blog.kyu08.com/pr-255/posts/fzf-bookmark-opener/cover.png">
  <meta name="twitter:image" content="https://blog.kyu08.com/pr-255/posts/fzf-bookmark-opener/cover.png">
  <meta name="twitter:image:alt" content="yamlに定義したbookmarkをfzfで選択してブラウザで開くCLIツールをGoで作った">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">


  <meta property="article:published_time" content="2023-02-22 16:15:48 &#43;0000 UTC" />









<link rel="author" href="http://www.hatena.ne.jp/kyu08/" />




<script async src="https://www.googletagmanager.com/gtag/js?id=G-BDQ408J45J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '{{ . }}');
</script>




</head>
<body>


<div class="container">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    blog.kyu08.com
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/pr-255/tags/diary/">_misc</a></li>
        
      
        
          <li><a href="/pr-255/about">about</a></li>
        
      
        
          <li><a href="/pr-255/index.xml">rss</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/pr-255/tags/diary/" >_misc</a></li>
        
      
        
          <li><a href="/pr-255/about" >about</a></li>
        
      
        
          <li><a href="/pr-255/index.xml" >rss</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.kyu08.com/pr-255/posts/fzf-bookmark-opener/">yamlに定義したbookmarkをfzfで選択してブラウザで開くCLIツールをGoで作った</a>
  </h1>
  <div class="post-meta"><time class="post-date">2023/02/22</time>
      
    <span class="post-reading-time">4 min read (1657 words)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://blog.kyu08.com/pr-255/tags/go/">Go</a>&nbsp;
      
      #<a href="https://blog.kyu08.com/pr-255/tags/cli/">cli</a>&nbsp;
      
    </span>
  
  
  <img src="/pr-255/posts/fzf-bookmark-opener/cover.png"
    class="post-cover"
    alt="yamlに定義したbookmarkをfzfで選択してブラウザで開くCLIツールをGoで作った"
    title="Cover Image" />


  
    <div class="table-of-contents">
      <h2>
        目次
      </h2>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#つくったもの">つくったもの</a></li>
    <li><a href="#コードの話">コードの話</a></li>
    <li><a href="#ちゃっかりbrewでも公開してみた">ちゃっかりbrewでも公開してみた</a></li>
    <li><a href="#ちゃっかりヘルパースクリプトも公開した">ちゃっかりヘルパースクリプトも公開した</a></li>
    <li><a href="#余談1">余談1</a></li>
    <li><a href="#余談2">余談2</a></li>
    <li><a href="#まとめ">まとめ</a></li>
  </ul>
</nav>
    </div>
  

  <div class="post-content"><div>
        <h2 id="つくったもの">つくったもの<a href="#つくったもの" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>yamlに定義しておいたbookmarkをfzfで選択してブラウザで開くCLIツールをGoで作った。</p>
<p><div class="blogcard" data-url="https://github.com/kyu08/fzf-bookmark-opener" data-auto-fetch="true">
  <a href="https://github.com/kyu08/fzf-bookmark-opener" target="_blank" rel="noopener noreferrer" class="blogcard-link"><div class="blogcard-thumbnail blogcard-thumbnail-placeholder">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </div><div class="blogcard-content">
      <div class="blogcard-title">https://github.com/kyu08/fzf-bookmark-opener</div><div class="blogcard-url">https://github.com/kyu08/fzf-bookmark-opener</div>
    </div>
  </a>
</div>
</p>
<p>こんな感じで動く。</p>
<p><img src="https://user-images.githubusercontent.com/49891479/218272272-e693c10d-c810-458a-bf46-9c3a4a2fe45a.gif" alt="demo"></p>
<h2 id="コードの話">コードの話<a href="#コードの話" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>コード自体は大変シンプルで</p>
<ol>
<li>設定ファイルがなければ<code>~/.config/fzf-bookmark-opener/config.yaml</code>に作成</li>
<li>設定ファイルの読み込み</li>
<li>fzfで選択</li>
<li>選択されたブックマークをブラウザで開く</li>
</ol>
<p>ということをやっているだけである。(<code>main.go</code>に120行弱だけという素朴なコード量)</p>
<p><a href="https://github.com/kyu08/fzf-bookmark-opener/blob/69313bf187dcfd6127efcf75e172a34fb9b8e05a/main.go#L38-L60" target="_blank" >fzf-bookmark-opener/main.go at main · kyu08/fzf-bookmark-opener</a></p>
<p>この記述量で作れたのは間違いなくktr0731/go-fuzzyfinderのおかげでした。このライブラリのおかげでgoのコードからfzfを簡単に呼び出すことができました。というかなんならこのライブラリの存在を知ったので使ってみたくなってfzf-bookmark-openerを作ったみたいなとこもあります。ありがとうございます。</p>
<p><a href="https://github.com/ktr0731/go-fuzzyfinder" target="_blank" >ktr0731/go-fuzzyfinder</a></p>
<h2 id="ちゃっかりbrewでも公開してみた">ちゃっかりbrewでも公開してみた<a href="#ちゃっかりbrewでも公開してみた" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>brewでインストールできるに越したことはないだろうってことで、brewでも公開してみたが思いのほか簡単だった。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>brew tap kyu08/tap
</span></span><span style="display:flex;"><span>brew install kyu08/tap/fzf-bookmark-opener
</span></span></code></pre></div><p>これだけでインストールできるので気になった方もそうでない方もぜひ。issueやPRもお待ちしています。(<code>go install</code>でインストールしたい方はこちら(<code>go install github.com/kyu08/fzf-bookmark-opener@latest</code>))</p>
<p>brew公開に関してはこちらのブログを参考にしたら30分弱でサクッと公開できた(想像より簡単だった)</p>
<p><div class="blogcard" data-url="https://www.rasukarusan.com/entry/2019/11/03/211338" data-auto-fetch="true">
  <a href="https://www.rasukarusan.com/entry/2019/11/03/211338" target="_blank" rel="noopener noreferrer" class="blogcard-link"><div class="blogcard-thumbnail blogcard-thumbnail-placeholder">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </div><div class="blogcard-content">
      <div class="blogcard-title">https://www.rasukarusan.com/entry/2019/11/03/211338</div><div class="blogcard-url">https://www.rasukarusan.com/entry/2019/11/03/211338</div>
    </div>
  </a>
</div>
</p>
<p>詳細は↑の記事を読んでいただければわかるが、リリースにバイナリを含めて配布用のrepositoryを作るだけなので本当に簡単だったのでツールを配布したい人はぜひ。</p>
<h2 id="ちゃっかりヘルパースクリプトも公開した">ちゃっかりヘルパースクリプトも公開した<a href="#ちゃっかりヘルパースクリプトも公開した" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>現在お仕事ではGCPを使っているんですが、GCPのコンソールをプロジェクト、サービスを指定して直接開きたいことが多いのでプロジェクトのリストを渡すとGCPの主要なサービス(主観)のURL一覧をfzf-bookmark-openerの設定ファイルの形式で吐いてくれるスクリプトも公開した。</p>
<p><a href="https://github.com/kyu08/gcp-url-generator" target="_blank" >kyu08/gcp-url-generator</a></p>
<p>project名のリストとregionを渡すとこういう文字列を吐いてくれるイメージ。(以下は出力の一部)(この例だとregionは関係ない)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Home stg&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/home/dashboard?project=stg&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Home dev&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/home/dashboard?project=dev&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Home prod&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/home/dashboard?project=prod&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Datastore stg&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/datastore/entities?project=stg&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Datastore dev&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/datastore/entities?project=dev&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Datastore prod&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/datastore/entities?project=prod&#39;</span>
</span></span></code></pre></div><p>現在の対応サービスは以下で、Cloud Runに関してはサービス名の配列を渡すとプロジェクト*サービスの全組み合わせのURLを吐く。</p>
<ul>
<li>Dashboard</li>
<li>Datastore</li>
<li>App Engine</li>
<li>Artifact Registry</li>
<li>Cloud Storage</li>
<li>Spanner</li>
<li>BigQuery</li>
<li>Cloud Scheduler</li>
<li>PubSub</li>
<li>Dataflow</li>
<li>Cloud Build</li>
<li>Cloud Tasks</li>
<li>Cloud Run</li>
<li>Cloud SQL</li>
<li>Cloud Functions</li>
<li>IAM</li>
<li>Secret Manager</li>
<li>AI Platform</li>
<li>Compute Engine</li>
<li>Logging</li>
<li>Monitoring</li>
<li>Workflows</li>
<li>Firebase Realtime Database (DB)</li>
<li>Firebase Hosting</li>
<li>Firebase Remote Config</li>
</ul>
<p>これで生成したURLをfzf-bookmark-openerに食わせるとお使いのGCPプロジェクトの特定のサービスがコマンドラインからサクッと開くことができる。(詳しくは<a href="https://github.com/kyu08/gcp-url-generator" target="_blank" >kyu08/gcp-url-generatorのREADME</a>を参照)
こちらもissueやPRお待ちしてます。</p>
<h2 id="余談1">余談1<a href="#余談1" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Rustだとlotabout/skimを使うとktr0731/go-fuzzyfinderと同じようなことができるらしい。最近Rust熱が高まりに高まっている(Tour of Rustやり中)ので次に何かCLIでfzfなツールをつくるときは使ってみようと思う。</p>
<p><a href="https://github.com/lotabout/skim" target="_blank" >lotabout/skim</a></p>
<p>[追記]
Makefileに定義されたtargetをfzfで選択して実行するCLIツールをRustでつくった。</p>
<p><a href="https://github.com/kyu08/fzf-make" target="_blank" >kyu08/fzf-make</a></p>
<h2 id="余談2">余談2<a href="#余談2" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>ふと気になってktr0731/go-fuzzyfinderをはじめとする依存ライブラリのライセンス表示はどうすればいいか気になって調べてみたところリポジトリに<code>NOTICES</code>とか<code>CREDITS</code>とか<code>ThirdPartyNotices</code>みたいなファイルを置いてそこに依存ライブラリの著作権・ライセンス表示をするのが一般的なようだった。</p>
<p>手作業でやるのは辛いので自動生成ツールを探したところGoだとこれが使いやすそうだったので使ってみたけど簡単でとてもよかった。ありがたや&hellip;。</p>
<p><div class="blogcard" data-url="https://github.com/Songmu/gocredits" data-auto-fetch="true">
  <a href="https://github.com/Songmu/gocredits" target="_blank" rel="noopener noreferrer" class="blogcard-link"><div class="blogcard-thumbnail blogcard-thumbnail-placeholder">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </div><div class="blogcard-content">
      <div class="blogcard-title">https://github.com/Songmu/gocredits</div><div class="blogcard-url">https://github.com/Songmu/gocredits</div>
    </div>
  </a>
</div>
</p>
<h2 id="まとめ">まとめ<a href="#まとめ" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>ktr0731/go-fuzzyfinderはいいぞ〜</p>

      </div></div>

  
  

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">Read other posts</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://blog.kyu08.com/pr-255/posts/fzf-make/" class="button inline prev">
        Makefileに定義されたtargetをfzfで選択して実行するCLIツールをRustでつくった
      </a>
    
    
      <a href="https://blog.kyu08.com/pr-255/posts/tmux-neovim-scratch/" class="button inline next">
        Tmux&#43;NeovimでJetBrains IDEのScratchみたいな機能を実現している話
      </a>
    
  </div>
</div>


  

  
    <script src="https://utteranc.es/client.js"
        repo="kyu08/blog-comments"
        issue-term="pathname"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>blog.kyu08.com</span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/pr-255/bundle.min.js"></script>


<font color="#808080">
  <span>
    This site uses Google Analytics for access analysis.
    Google Analytics uses cookies to collect traffic data, but this traffic data is collected anonymously and does not personally identify you.
    Cookies can be disabled in your browser.
  </span>
</font>


<script src="https://blog.kyu08.com/pr-255/blogcard.js"></script>


  
</div>

</body>
</html>
