<!DOCTYPE html>
<html lang="ja">
<head>
  
    <title>yamlに定義したbookmarkをfzfで選択してブラウザで開くくんを作った :: blog.kyu08.com</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="つくったもの yamlに定義しておいたbookmarkをfzfで選択してブラウザで開くくんを作った。 https://github.com/kyu08/fzf-bookmark-opener こんな感じで動く。 コードの話 コード自体は" />
<meta name="keywords" content=", " />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.kyu08.com/posts/fzf-bookmark-opener/" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-BDQ408J45J"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BDQ408J45J', { 'anonymize_ip': false });
}
</script>





  
  
  
  
  
  <link rel="stylesheet" href="https://blog.kyu08.com/styles.css">



<link rel="stylesheet" href="https://blog.kyu08.com/style.css">



  <link rel="shortcut icon" href="https://blog.kyu08.com/favicon.ico">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="kyu08_" />



<meta property="og:locale" content="ja" />
<meta property="og:type" content="article" />
<meta property="og:title" content="yamlに定義したbookmarkをfzfで選択してブラウザで開くくんを作った">
<meta property="og:description" content="つくったもの yamlに定義しておいたbookmarkをfzfで選択してブラウザで開くくんを作った。 https://github.com/kyu08/fzf-bookmark-opener こんな感じで動く。 コードの話 コード自体は" />
<meta property="og:url" content="https://blog.kyu08.com/posts/fzf-bookmark-opener/" />
<meta property="og:site_name" content="blog.kyu08.com" />

  
  
  <meta property="og:image" content="https://blog.kyu08.com">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2023-02-23 01:15:48 &#43;0900 &#43;0900" />












<script async src="https://www.googletagmanager.com/gtag/js?id=G-BDQ408J45J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '{{ . }}');
</script>




</head>
<body class="orange">


<div class="container headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    blog.kyu08.com
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about" >About</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.kyu08.com/posts/fzf-bookmark-opener/">yamlに定義したbookmarkをfzfで選択してブラウザで開くくんを作った</a>
  </h1>
  <div class="post-meta">
    
      <time class="post-date">
        2023-02-23 ::
        
          [Updated :: 2023-02-23]
        
      </time>
    
    
      <span class="post-author">kyu08</span>
    
    
      <span class="post-reading-time">:: 4 min read (1650 words)</span>
    
  </div>

  
    <span class="post-tags">
      
      #<a href="https://blog.kyu08.com/tags/go/">go</a>&nbsp;
      
      #<a href="https://blog.kyu08.com/tags/cli/">cli</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <h2 id="つくったもの">つくったもの<a href="#つくったもの" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>yamlに定義しておいたbookmarkをfzfで選択してブラウザで開くくんを作った。</p>
<p><a href="https://github.com/kyu08/fzf-bookmark-opener">https://github.com/kyu08/fzf-bookmark-opener</a></p>
<p>こんな感じで動く。</p>
<p><img src="https://user-images.githubusercontent.com/49891479/218272272-e693c10d-c810-458a-bf46-9c3a4a2fe45a.gif" alt="demo"></p>
<h2 id="コードの話">コードの話<a href="#コードの話" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>コード自体は大変シンプルで</p>
<ol>
<li>設定ファイルがなければ<code>~/.config/fzf-bookmark-opener/config.yaml</code>に作成</li>
<li>設定ファイルの読み込み</li>
<li>fzfで選択</li>
<li>選択されたブックマークをブラウザで開く</li>
</ol>
<p>ということをやっているだけである。(<code>main.go</code>に120行弱だけという素朴なコード量)</p>
<p><a href="https://github.com/kyu08/fzf-bookmark-opener/blob/69313bf187dcfd6127efcf75e172a34fb9b8e05a/main.go#L38-L60">fzf-bookmark-opener/main.go at main · kyu08/fzf-bookmark-opener</a></p>
<p>この記述量で作れたのは間違いなくktr0731/go-fuzzyfinderのおかげでした。このライブラリのおかげでgoのコードからfzfを簡単に呼び出すことができました。というかなんならこのライブラリの存在を知ったので使ってみたくなってfzf-bookmark-openerを作ったみたいなとこもあります。ありがとうございます。</p>
<p><a href="https://github.com/ktr0731/go-fuzzyfinder">ktr0731/go-fuzzyfinder</a></p>
<h2 id="ちゃっかりbrewでも公開してみた">ちゃっかりbrewでも公開してみた<a href="#ちゃっかりbrewでも公開してみた" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>brewでインストールできるに越したことはないだろうってことで、brewでも公開してみたが思いのほか簡単だった。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>brew tap kyu08/tap
</span></span><span style="display:flex;"><span>brew install kyu08/tap/fzf-bookmark-opener
</span></span></code></pre></div><p>これだけでインストールできるので気になった方もそうでない方もぜひ。issueやPRもお待ちしています。(<code>go install</code>でインストールしたい方はこちら(<code>go install github.com/kyu08/fzf-bookmark-opener@latest</code>))</p>
<p>brew公開に関してはこちらのブログを参考にしたら30分弱でサクッと公開できた(想像より簡単だった)</p>
<p><a href="https://www.rasukarusan.com/entry/2019/11/03/211338">https://www.rasukarusan.com/entry/2019/11/03/211338</a></p>
<p>詳細は↑の記事を読んでいただければわかるが、リリースにバイナリを含めて配布用のrepositoryを作るだけなので本当に簡単だったのでツールを配布したい人はぜひ。</p>
<h2 id="ちゃっかりヘルパースクリプトも公開した">ちゃっかりヘルパースクリプトも公開した<a href="#ちゃっかりヘルパースクリプトも公開した" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>現在お仕事ではGCPを使っているんですが、GCPのコンソールをプロジェクト、サービスを指定して直接開きたいことが多いのでプロジェクトのリストを渡すとGCPの主要なサービス(主観)のURL一覧をfzf-bookmark-openerの設定ファイルの形式で吐いてくれるスクリプトも公開した。</p>
<p><a href="https://github.com/kyu08/gcp-url-generator">kyu08/gcp-url-generator</a></p>
<p>project名のリストとregionを渡すとこういう文字列を吐いてくれるイメージ。(以下は出力の一部)(この例だとregionは関係ない)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Home stg&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/home/dashboard?project=stg&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Home dev&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/home/dashboard?project=dev&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Home prod&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/home/dashboard?project=prod&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Datastore stg&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/datastore/entities?project=stg&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Datastore dev&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/datastore/entities?project=dev&#39;</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#39;Datastore prod&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#39;https://console.cloud.google.com/datastore/entities?project=prod&#39;</span>
</span></span></code></pre></div><p>現在の対応サービスは以下で、Cloud Runに関してはサービス名の配列を渡すとプロジェクト*サービスの全組み合わせのURLを吐く。</p>
<ul>
<li>Dashboard</li>
<li>Datastore</li>
<li>App Engine</li>
<li>Artifact Registry</li>
<li>Cloud Storage</li>
<li>Spanner</li>
<li>BigQuery</li>
<li>Cloud Scheduler</li>
<li>PubSub</li>
<li>Dataflow</li>
<li>Cloud Build</li>
<li>Cloud Tasks</li>
<li>Cloud Run</li>
<li>Cloud SQL</li>
<li>Cloud Functions</li>
<li>IAM</li>
<li>Secret Manager</li>
<li>AI Platform</li>
<li>Compute Engine</li>
<li>Logging</li>
<li>Monitoring</li>
<li>Workflows</li>
<li>Firebase Realtime Database (DB)</li>
<li>Firebase Hosting</li>
<li>Firebase Remote Config</li>
</ul>
<p>これで生成したURLをfzf-bookmark-openerに食わせるとお使いのGCPプロジェクトの特定のサービスがコマンドラインからサクッと開くことができる。(詳しくは<a href="https://github.com/kyu08/gcp-url-generator">kyu08/gcp-url-generatorのREADME</a>を参照)
こちらもissueやPRお待ちしてます。</p>
<h2 id="余談1">余談1<a href="#余談1" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Rustだとlotabout/skimを使うとktr0731/go-fuzzyfinderと同じようなことができるらしい。最近Rust熱が高まりに高まっている(Tour of Rustやり中)ので次に何かCLIでfzfなツールをつくるときは使ってみようと思う。</p>
<p><a href="https://github.com/lotabout/skim">lotabout/skim</a></p>
<p>[追記]
Makefileに定義されたtargetをfzfで選択して実行するCLIツールをRustでつくった。</p>
<p><a href="https://github.com/kyu08/fzf-make">kyu08/fzf-make</a></p>
<h2 id="余談2">余談2<a href="#余談2" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>ふと気になってktr0731/go-fuzzyfinderをはじめとする依存ライブラリのライセンス表示はどうすればいいか気になって調べてみたところリポジトリに<code>NOTICES</code>とか<code>CREDITS</code>とか<code>ThirdPartyNotices</code>みたいなファイルを置いてそこに依存ライブラリの著作権・ライセンス表示をするのが一般的なようだった。</p>
<p>手作業でやるのは辛いので自動生成ツールを探したところGoだとこれが使いやすそうだったので使ってみたけど簡単でとてもよかった。ありがたや&hellip;。</p>
<p><a href="https://github.com/Songmu/gocredits">https://github.com/Songmu/gocredits</a></p>
<h2 id="まとめ">まとめ<a href="#まとめ" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>ktr0731/go-fuzzyfinderはいいぞ〜</p>

      </div></div>

  
    
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="https://blog.kyu08.com/posts/fzf-make/">
                <span class="button__icon">←</span>
                <span class="button__text">Makefileに定義されたtargetをfzfで選択して実行するCLIツールをRustでつくった</span>
            </a>
        </span>
        
        
        <span class="button next">
            <a href="https://blog.kyu08.com/posts/tmux-neovim-scratch/">
                <span class="button__text">Tmux&#43;NeovimでJetBrains IDEのScratchみたいな機能を実現している話</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>blog.kyu08.com</span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
