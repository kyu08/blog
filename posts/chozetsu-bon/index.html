<!DOCTYPE html>
<html lang="ja">
<head>
  
    <title>ちょうぜつ本を読んだ :: blog.kyu08.com</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="田中ひさてるさんの『ちょうぜつソフトウェア設計入門――PHPで理解するオブジェクト指向の活用』が話題になっていたので読んでみた。 全体を通して" />
<meta name="keywords" content="読書ログ, 設計" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.kyu08.com/posts/chozetsu-bon/" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-BDQ408J45J"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BDQ408J45J', { 'anonymize_ip': false });
}
</script>





  
  
  
  
  
  <link rel="stylesheet" href="https://blog.kyu08.com/styles.css">



<link rel="stylesheet" href="https://blog.kyu08.com/style.css">



  <link rel="shortcut icon" href="https://blog.kyu08.com/favicon.ico">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="kyu08_" />



<meta property="og:locale" content="ja" />
<meta property="og:type" content="article" />
<meta property="og:title" content="ちょうぜつ本を読んだ">
<meta property="og:description" content="田中ひさてるさんの『ちょうぜつソフトウェア設計入門――PHPで理解するオブジェクト指向の活用』が話題になっていたので読んでみた。 全体を通して" />
<meta property="og:url" content="https://blog.kyu08.com/posts/chozetsu-bon/" />
<meta property="og:site_name" content="blog.kyu08.com" />

  
  
  <meta property="og:image" content="https://blog.kyu08.com/cover.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2023-07-16 00:00:00 &#43;0900 &#43;0900" />









<link rel="author" href="http://www.hatena.ne.jp/kyu08/" />




<script async src="https://www.googletagmanager.com/gtag/js?id=G-BDQ408J45J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '{{ . }}');
</script>




</head>
<body class="orange">


<div class="container headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    blog.kyu08.com
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about" >About</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.kyu08.com/posts/chozetsu-bon/">ちょうぜつ本を読んだ</a>
  </h1>
  <div class="post-meta">
    
      <time class="post-date">
        2023-07-16 ::
        
      </time>
    
    
      <span class="post-author">kyu08</span>
    
    
      <span class="post-reading-time">:: 4 min read (1956 words)</span>
    
  </div>

  
    <span class="post-tags">
      
      #<a href="https://blog.kyu08.com/tags/%E8%AA%AD%E6%9B%B8%E3%83%AD%E3%82%B0/">読書ログ</a>&nbsp;
      
      #<a href="https://blog.kyu08.com/tags/%E8%A8%AD%E8%A8%88/">設計</a>&nbsp;
      
    </span>
  
  
  <img src="https://blog.kyu08.com/cover.png"
    class="post-cover"
    alt="ちょうぜつ本を読んだ"
    title="Cover Image" />


  
    <div class="table-of-contents">
      <h2>
        目次
      </h2>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#第2章-パッケージ原則">第2章 パッケージ原則</a></li>
    <li><a href="#第3章-オブジェクト指向">第3章 オブジェクト指向</a>
      <ul>
        <li><a href="#いい抽象を見つけるには">いい抽象を見つけるには</a></li>
        <li><a href="#多態性がなくても役立つ">「多」態性がなくても役立つ</a></li>
      </ul>
    </li>
    <li><a href="#第5章-オブジェクト指向原則-solid">第5章 オブジェクト指向原則 SOLID</a>
      <ul>
        <li><a href="#5-2-単一責任原則single-responsibility-principlesrp">5-2 単一責任原則(Single Responsibility Principle(SRP))</a></li>
        <li><a href="#5-3-開放閉鎖原則open-close-principle">5-3 開放閉鎖原則(Open Close Principle)</a></li>
      </ul>
    </li>
    <li><a href="#第7章-依存性注入">第7章 依存性注入</a></li>
    <li><a href="#まとめ">まとめ</a></li>
  </ul>
</nav>
    </div>
  

  <div class="post-content"><div>
        <p>田中ひさてるさんの『ちょうぜつソフトウェア設計入門――PHPで理解するオブジェクト指向の活用』が話題になっていたので読んでみた。</p>
<p>全体を通して平易な日本語で書かれていたのとコード例が豊富だったので理解しやすくてよかった。</p>
<p>以下学びを簡単にまとめていく。</p>
<h2 id="第2章-パッケージ原則">第2章 パッケージ原則<a href="#第2章-パッケージ原則" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>より変更に強いパッケージ設計にするために注意すべき点として</p>
<ul>
<li>パッケージの凝集性を高める</li>
<li>より安定度が高い(=抽象度が高い)パッケージに依存する</li>
</ul>
<p>などがある。</p>
<p>また、<strong>凝集性の低さを表すシグナル</strong>として<strong>そのパッケージが変更される理由が複数あること</strong>・<strong>1つの変更の際に変更対象となるパッケージが複数あること</strong>(それぞれ同じ?)が挙げられる。</p>
<p>「抽象」については以下のように説明されていた。</p>
<blockquote>
<ul>
<li>抽象クラスやインターフェイスなど実装詳細を自身から排除したもの</li>
<li>上記のような詳細を持たないものだけに依存するロジック</li>
<li>固有の業務にも特定技術にも関係しない時刻や配列などの汎用概念とその操作</li>
<li>プログラミング言語そのものや言語標準ライブラリと同等レベルの業界標準</li>
</ul>
</blockquote>
<h2 id="第3章-オブジェクト指向">第3章 オブジェクト指向<a href="#第3章-オブジェクト指向" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<h3 id="いい抽象を見つけるには">いい抽象を見つけるには<a href="#いい抽象を見つけるには" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>具体的な例を分析してそれらから抽象を見つけることで期待値の高い抽象を発見することができる。</p>
<p>逆に先に<strong>ひとりよがりの哲学をこねくり回して現実をかえりみない抽象化を先行させた</strong>場合は、<strong>役に立たない概念に縛られる無駄が起きやすくなる。</strong>（ペットショップのシステムなのに「Cat には野良猫もいるかもしれない。必ずしも Pet ではないかも&hellip;…」みたいなことを考えてしまうのは明らかに無駄）（抽象化においてもYAGNIが重要っぽい）</p>
<p>無限の可能性に向かって発散してしまわず、いかに可能性を削ぎ落として最小サイズで実際に起こりうるバリエーションをカバーできるかが汎化のポイント。</p>
<p>そういう意味でもドメインやビジネスの状況を理解しておくことはプロダクトの将来を考慮しながら設計するために必要なんだろうなと思った。</p>
<h3 id="多態性がなくても役立つ">「多」態性がなくても役立つ<a href="#多態性がなくても役立つ" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>抽象と具象は必ずしも1対多の関係である必要はない。</p>
<p>具象と抽象に分けておくことで先に大枠を安定させることができるため、設計の見通しがつきやすくなる。</p>
<p>また、具象の数が複数になったときに対応しやすいというメリットもある。</p>
<p>これまで「抽象と具象が1対1対応なケースはわざわざDIする必要はないのでは」と思っていたが上記のメリットがあるので積極的にDIしていこうと思った。</p>
<h2 id="第5章-オブジェクト指向原則-solid">第5章 オブジェクト指向原則 SOLID<a href="#第5章-オブジェクト指向原則-solid" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<h3 id="5-2-単一責任原則single-responsibility-principlesrp">5-2 単一責任原則(Single Responsibility Principle(SRP))<a href="#5-2-単一責任原則single-responsibility-principlesrp" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>クラスと責務は1対1対応すべき、という指針。</p>
<h4 id="単一の責務のみつけかた">単一の責務のみつけかた<a href="#単一の責務のみつけかた" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p><strong>クラスの利用者がどんなときに別のクラスや新しいバージョンに交換したいと思うかを想像する。</strong></p>
<p>実際に起こりそうな交換要求への想像が責務(= クラスのカバー範囲)を見極めるヒントになる。</p>
<p>たとえば記事クラスが存在し記事の入稿および購読というユースケースがある例では以下のように考えることができる。</p>
<blockquote>
<p>ニュース記事を書く人の事情が変わったけれど、購読ユーザーには従来どおりのサービスを提供したい。逆に、入稿はそのまま、購読ユーザーへのサービスを拡張したい。そんなニーズが起きるのは容易に想像できます。入稿と購読のそれぞれを互いに影響を与えない独立したクラスとしておき、いつでも気兼ねなく別の実装に交換できる単位としておく方が、後で便利に決まっています。なので、ニュース記事管理の場合は、「入稿」と「購読」が、それぞれひとつの責務になります。</p>
</blockquote>
<h3 id="5-3-開放閉鎖原則open-close-principle">5-3 開放閉鎖原則(Open Close Principle)<a href="#5-3-開放閉鎖原則open-close-principle" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>拡張に対してオープン、変更にたいしてクローズドであるべき、という指針。</p>
<p>これは書籍内で紹介されていたコード例がわかりやすかった。</p>
<p>あとはどこが変化する仕様なのかを考えるために一度要件を抽象化してみる方法が紹介されていた。こちらもコード例が示されていたのでイメージが湧きやすかった。</p>
<h2 id="第7章-依存性注入">第7章 依存性注入<a href="#第7章-依存性注入" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>オブジェクトが使う機能の実体を得る際その解決を自力で行わず、常に外部から与えるようにすべき、という設計方針。</p>
<p>依存性注入を行うメリットの1つは生成の責務と使用の責務を分けられる点がある。</p>
<p>また、テスト容易性とDIについては以下のような記述があった。</p>
<blockquote>
<p>単体テストしやすいクラスであることと、DI可能なクラスであるということには、正の相関があります。DIを単に「単体テストのためにやること」といった目的観で考えるのは視野狭窄ではあるのですが、単体テストがアーキテクチャへの気づきの手段として、とても有用なのは間違いありません。</p>
</blockquote>
<p>テストが書きずらかったら設計を疑ってみるのも一つの手かもしれない。</p>
<h2 id="まとめ">まとめ<a href="#まとめ" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>よく聞くSOLID原則もやっとちゃんと理解できたし依存性注入に対する理解も深まったので今後に活かしていきたい。</p>

      </div></div>

  
    
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="https://blog.kyu08.com/posts/hello-go-static-analisys/">
                <span class="button__icon">←</span>
                <span class="button__text">Goの静的解析に入門した</span>
            </a>
        </span>
        
        
        <span class="button next">
            <a href="https://blog.kyu08.com/posts/nuphy-air60/">
                <span class="button__text">NuPhy Air60を買った</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  
    <script src="https://utteranc.es/client.js"
        repo="kyu08/blog-comments"
        issue-term="pathname"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>blog.kyu08.com</span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>


<font color="#808080">
  <span>
    This site uses Google Analytics for access analysis.
    Google Analytics uses cookies to collect traffic data, but this traffic data is collected anonymously and does not personally identify you.
    Cookies can be disabled in your browser.
  </span>
</font>


  
</div>

</body>
</html>
