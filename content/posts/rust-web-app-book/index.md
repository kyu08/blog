---
title: "『RustによるWebアプリケーション開発 設計からリリース・運用まで』を読んだ"
tags:
  - "rust"
  - "読書ログ"

description: ""
date: 2025-12-21T17:13:06+09:00
author: "kyu08"
authorTwitter: "kyu08_"
draft: false
showFullContent: false
readingTime: true
hideComments: false
color: ""
cover: "cover.png"
---

『RustによるWebアプリケーション開発 設計からリリース・運用まで』を読んだので学びを書こうと思う。

## モチベーション
Rustという言語の開発体験がかなり好きでRustでサーバーサイドを書くのがどんな感じなのか純粋に気になっていたので読んでみた。（筆者がサーバーサイドの開発でガッツリ書いたことがあるのはGoのみというバックグラウンド）

## 本書の概要
本書はRustで蔵書管理アプリケーションのサーバーサイドを実装しながらRustでのWebアプリケーション開発の仕方を学ぶことができる本。

ただ動くものを作る、というよりは業務の実際のサーバーサイドの開発でよく出くわす課題をRustでどう開発するかが豊富に紹介されていた。(DIやエラーハンドリングなど)

設計面ではレイヤードアーキテクチャを採用しており、レイヤー間の責務などが考慮された設計になっている。その意味でも実務での開発に近い内容になっていると言えるかもしれない。

あとはステップごとのコード差分が丁寧に書かれているので、本書に従って実装を進めるとWeb Serverの実装が出来上がる（はず）。[^1]

## 学び
- コンパイル時間短縮の工夫
    - レイヤーごとにクレートを分割することで変更があったクレートだけ再コンパイルすればよくなる。
- エラーハンドリングの方法
    - 基本はanyhowで扱っておいて、クライアントに返すエラーはthiserrorで定義する
- Web開発で有用なクレート
    <!-- - [`axum`](https://crates.io/crates/axum): Web S -->
    - [`derive_new`](https://crates.io/crates/derive-new): `new`関数を実装してくれる。デフォルト値の設定などもできる模様。
    - [`serde`](https://crates.io/crates/serde): 言わずとしれたシリアライズ/デシリアライズのためのクレート。
    - [`sqlx`](https://crates.io/crates/sqlx): SQLを型安全に扱うことができる。
- RustでどうDIを実装すべきか
    - ジェネリクスを用いてDIするパターン（静的ディスパッチ）
        - 記述量が増える
        - 動的ディスパッチと比較するとパフォーマンスが高い
    - トレイトオブジェクト（`dyn <トレイト名>`）を利用するパターン（動的ディスパッチ）
        - 記述量が減る
        - 静的ディスパッチと比較するとパフォーマンス面で不利

## Goとの比較
注釈かく
- Rustにはそこまで詳しくない
- あくまでチュートリアルをなぞっただけなので他の観点もあるはず

[^1]: 5章途中までしかやっていないので「はず」と書いている。
