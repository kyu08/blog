---
title: "ちょうぜつ本を読んだ"
tags: ["読書ログ", "設計"]
keywords: ["読書ログ", "設計"]

cover: "https://blog.kyu08.com/cover.png"
description: ""
date: 2023-07-16T00:00:00+09:00
author: "kyu08"
authorTwitter: "kyu08_"
draft: false
showFullContent: false
readingTime: true
hideComments: true
color: ""
---

田中ひさてるさんの『ちょうぜつソフトウェア設計入門――PHPで理解するオブジェクト指向の活用』が話題になっていたので読んでみた。

以下学びになったところを簡単にまとめていく

## 第2章 パッケージ原則
より変更に強いパッケージ設計にするために注意すべき点として

- パッケージの凝集性を高める
- より安定度が高い(=抽象度が高い)パッケージに依存する

などがある。

また、**凝集性の低さを表すシグナル**として**そのパッケージが変更される理由が複数あること**・**1つの変更の際に変更対象となるパッケージが複数あること**(それぞれ同じ?)が挙げられる。

<!-- TODO: ここもうちょっと思ったこととか生かしたい場面とか書きたいかも -->
どちらもあまり意識してこなかったので参考になった。

また「抽象」については以下のように説明されていた。

> - 抽象クラスやインターフェイスなど実装詳細を自身から排除したもの
> - 上記のような詳細を持たないものだけに依存するロジック
> - 固有の業務にも特定技術にも関係しない時刻や配列などの汎用概念とその操作
> - プログラミング言語そのものや言語標準ライブラリと同等レベルの業界標準
> 
> (『ちょうぜつソフトウェア設計入門――PHPで理解するオブジェクト指向の活用』33ページより)

<!-- TODO: ここももうちょっといい感じに言語化したい -->
うまく抽象度が高いパッケージに依存できるように意識して設計したい。
<!-- あまり言語化したことはなかったが、どれも安定度が高いものなので納得感はある。 -->

## 第3章 オブジェクト指向
### いい抽象を見つけるには
具体的な例を分析してそれらから抽象を見つけることで期待値の高い抽象を発見することができる。

逆に先に**ひとりよがりの哲学をこねくり回して現実をかえりみない抽象化を先行させた**場合は、**役に立たない概念に縛られる無駄が起きやすくなる。**（ペットショップのシステムなのに「Cat には野良猫もいるかもしれない。必ずしも Pet ではないかも...…」みたいなことを考えてしまうのは明らかに無駄）（抽象化においてもYAGNIが重要っぽい）

無限の可能性に向かって発散してしまわず、いかに可能性を削ぎ落として最小サイズで実際に起こりうるバリエーションをカバーできるかが汎化のポイント。

そういう意味でもドメインやビジネスの状況を理解しておくことはプロダクトの将来を考慮しながら設計するために必要なんだろうなと思った。

### 「多」態性がなくても役立つ
抽象と具象は必ずしも1対多の関係である必要はない。

具象と抽象に分けておくことで先に大枠を安定させることができるため、設計の見通しがつきやすくなる。

また、具象の数が複数になったときに対応しやすいというメリットもある。

これまで「抽象と具象が1対1対応なケースはわざわざDIする必要はないのでは」と思っていたが上記のメリットがあるので積極的にDIしていこうと思った。

## 第5章 オブジェクト指向原則 SOILID

## 第7章 依存性注入


## まとめ
全体を通して平易な日本語で書かれていたのとコード例が豊富だったので理解しやすかった。

結局自分で悩みながらコード書いていくことしかないよな〜という当たり前の感想を持った。
この本を読んでインプットした知識を活かしてアウトプットするぞ。
